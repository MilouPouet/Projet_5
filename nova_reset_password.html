<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©initialisation - NOVA √âV√âNEMENTS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/nova_reset_password.css">
</head>
<body>

    <nav>
        <div class="logo">NOVA<span>.</span></div>
        <a href="nova_login.html" class="back-link">‚Üê Retour connexion</a>
    </nav>

    <section class="auth-section">
        <div class="auth-bg-gradient"></div>

        <div class="card">
            
            <!-- STEP 1: EMAIL -->
            <div id="step-1" class="fade-in">
                <!-- Titre en une seule ligne comme demand√© -->
                <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 25px;">
                    <div class="padlock-icon">üîí</div>
                    <h2 style="font-size: 1.1rem; margin-bottom: 0; white-space: nowrap; text-transform:uppercase; font-weight:700;">Mot de passe oubli√© ?</h2>
                </div>

                <div class="form-group">
                    <label for="email">Adresse Email</label>
                    <input type="email" id="email" placeholder="votre@email.com">
                    <div id="error-email" class="error-msg">Veuillez entrer une adresse email valide.</div>
                </div>
                <button onclick="sendCode()">Envoyer le code</button>
            </div>

            <!-- STEP 2: OTP -->
            <div id="step-2" class="hidden fade-in">
                <div style="margin-bottom: 20px;">
                    <div class="padlock-icon">üì©</div>
                    <h2 style="font-size: 1.1rem; text-transform:uppercase;">V√©rification</h2>
                    <p style="font-size:0.85rem; color:#888;">Code envoy√© √† <span id="display-email" style="color:white; font-weight:700;"></span></p>
                </div>
                <div class="form-group">
                    <input type="text" id="otp-code" placeholder="------" maxlength="6" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                    <div id="error-otp" class="error-msg">Code incorrect.</div>
                </div>
                <button onclick="verifyCode()">Valider</button>
                <a href="#" onclick="location.reload()" style="display:block; margin-top:15px; font-size:0.8rem; color:#666;">Renvoyer le code</a>
            </div>

            <!-- STEP 3: NEW PASS -->
            <div id="step-3" class="hidden fade-in">
                <div style="margin-bottom: 20px;">
                    <div class="padlock-icon">üîë</div>
                    <h2 style="font-size: 1.1rem; text-transform:uppercase;">S√©curisation</h2>
                </div>
                <div class="form-group">
                    <label for="new-pass">Nouveau mot de passe</label>
                    <input type="password" id="new-pass" placeholder="8 caract√®res min">
                </div>
                <div class="form-group">
                    <label for="confirm-pass">Confirmer</label>
                    <input type="password" id="confirm-pass">
                    <div id="error-pass" class="error-msg">Les mots de passe ne correspondent pas.</div>
                </div>
                <button onclick="resetPassword()">Mettre √† jour</button>
            </div>

            <!-- STEP 4: SUCCESS -->
            <div id="step-4" class="hidden fade-in">
                <div class="success-icon">‚úî</div>
                <h2 style="font-size: 1.2rem; text-transform:uppercase; margin-bottom:10px;">Succ√®s !</h2>
                <p style="font-size:0.9rem; color:#888; margin-bottom:20px;">Votre mot de passe a √©t√© r√©initialis√©.</p>
                <button onclick="window.location.href='nova_login.html'">Retour √† la connexion</button>
            </div>

        </div>
    </section>

    <script>
        let generatedCode = null;
        let userEmail = "";

        // Simulation envoi code
        function sendCode() {
            const emailInput = document.getElementById('email').value;
            const errorDiv = document.getElementById('error-email');

            if (emailInput === "" || !emailInput.includes('@')) {
                errorDiv.style.display = 'block'; return;
            }
            
            errorDiv.style.display = 'none';
            userEmail = emailInput;
            generatedCode = Math.floor(100000 + Math.random() * 900000);
            
            // Pour la d√©mo, on affiche le code dans une alerte
            alert("NOVA SECURITY :\nVotre code de v√©rification est : " + generatedCode);
            document.getElementById('display-email').innerText = userEmail;
            switchStep('step-1', 'step-2');
        }

        // V√©rification du code
        function verifyCode() {
            const inputCode = document.getElementById('otp-code').value;
            const errorDiv = document.getElementById('error-otp');

            if (inputCode == generatedCode) {
                errorDiv.style.display = 'none';
                switchStep('step-2', 'step-3');
            } else {
                errorDiv.style.display = 'block';
            }
        }

        // Changement mot de passe
        function resetPassword() {
            const pass1 = document.getElementById('new-pass').value;
            const pass2 = document.getElementById('confirm-pass').value;
            const errorDiv = document.getElementById('error-pass');

            if (pass1 === "" || pass1.length < 4) {
                alert("Le mot de passe est trop court."); return;
            }
            if (pass1 === pass2) {
                errorDiv.style.display = 'none';
                switchStep('step-3', 'step-4');
            } else {
                errorDiv.style.display = 'block';
            }
        }

        // Helper pour changer d'√©tape
        function switchStep(hideId, showId) {
            document.getElementById(hideId).classList.add('hidden');
            document.getElementById(showId).classList.remove('hidden');
        }
    </script>
</body>
</html>